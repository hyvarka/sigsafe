$Id$

sigsafe version 0.1.3-dev release notes:

* Linux/i386 appears to be working perfectly.

* Linux/alpha has mixed results:

  - On a single-processor system, it appears to work perfectly. Details:

    spe141.testdrive.compaq.com:
    - Alpha XP1000a
    - Debian 3.0
    - kernel 2.4.18-generic
    - glibc 2.2.5

    Unfortunately, this system is being removed, so I will not be able to test
    it for much longer.

  - On three different SMP systems, the race condition checker often fails -
    the child dies with SIGTRAP. I think this is not a real problem with the
    code being checked, but rather a race in ptrace() itself. Machine details:

    spe144.testdrive.compaq.com:
    - Alpha ES40
    - RedHat 7.2
    - kernel 2.4.9-32.5smp
    - glibc 2.2.4-29

    spe161.testdrive.compaq.com:
    - Alpha DS40
    - Debian 3.0
    - kernel 2.4.18-smp
    - glibc 2.2.5

    spe148.testdrive.compaq.com:
    - Alpha DS40
    - RedHat 7.2
    - kernel 2.4.9-32.5smp
    - glibc 2.2.4-29

* The FreeBSD/x86 support is preliminary:

  - With LinuxThreads, sigaction returns -1/EINVAL in sigsafe_install_handler.
    No handler is installed. Not sure why.

  - I don't have access to a machine with FreeBSD 5.X and a KSE-based pthread
    library. I'd like to hear reports of success or failure from people who
    do.

  - Don't use it with user thread libraries (-pthread under FreeBSD 4.X).
    sigsafe does not support them and never will. (Symptoms: simple_test will
    return EAGAIN if no input is available when it does the read.)

  - The race condition checker doesn't compile. No si_code constants; probably
    not too hard to fix, but I haven't yet.

* The documentation is improved, but it still has a ways to go:

  - The "Background" section stops abruptly. There are a lot more topics to
    cover.
  - The "Pattern reference" could use more explanation and should be adapted
    to use the same terminology.
  - The "Goal reference" doesn't really exist yet.

  If you spot anything wrong with what's already there, please let me know. If
  it's unclear to you, odds are it is to someone else, too. And if it seems
  wrong to you, let me know so I can correct or justify it.

  Patches to add new documentation are also welcome. But saying "it's just not
  there" doesn't help - I already know that.

* The race checker is in pretty good shape now on Linux/x86.
  Try it out with "tests/race_checker/race_checker -qm" for a quick test.

* The race checker still doesn't work under Darwin. It will give
  results like this:

    $ ./race_checker -qm
    Running sigsafe_read test
    attached
    stepped once

    ERROR: Child was killed/dump from signal 5.

    ...

      Test                 Result               Expected            
    ----------------------------------------------------------------
    * sigsafe_read         misc. failure        success             
    * racebefore_read      misc. failure        ignored signal      
    * raceafter_read       misc. failure        forgotten result    

    * - These 3 tests did not return the expected result.

  signal 5 is SIGTRAP. I need to find out how to intercept this so the child
  does not die.
